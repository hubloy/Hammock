jQuery(function(m){m(document).on("click",".hammock-addon-toggle-setting",function(){var e=m(this),t=e.attr("data-id"),a=e.attr("data-name"),o=e.attr("data-nonce"),n=m("#addons-settings"),c=n.find(".hammock-canvas-content"),e=c.find(".addon-title"),i=c.find(".addon-content"),c=c.find(".addon_id");UIkit.offcanvas(n).isToggled()&&UIkit.offcanvas(n).close(),c.val(t),e.html(a),i.html('<span uk-spinner="ratio: 4.5"></span>'),UIkit.offcanvas(n).show(),m.post(window.ajaxurl,{id:t,_wpnonce:o,action:"hammock_addon_settings"}).done(function(e){e.success?i.html(e.data.view):i.html(e.data)}).fail(function(e,t,a){hammock.helper.notify(hammock.error,"error")})})}),jQuery(function(c){c(".hammock-date-filter").datepicker({dateFormat:"yy-mm-dd",maxDate:"0"}),hammock.helper.select2(),hammock.helper.bind_date_range(),c("body").on("submit","form.hammock-ajax-form",function(e){var a=c(this),o=a.find("button"),n=o.text();return o.attr("disabled","disabled"),o.html("<div uk-spinner></div>"),c.post(window.ajaxurl,a.serialize()).done(function(e){var t;o.removeAttr("disabled"),o.html(n),!0===e.success?(a.trigger("reset"),void 0!==e.data.message?(hammock.helper.notify(e.data.message,"success"),void 0!==e.data.modal&&(t=c(""+e.data.modal),UIkit.modal(t).hide()),void 0!==e.data.reload&&window.location.reload()):hammock.helper.notify(e.data,"success")):hammock.helper.notify(e.data,"warning")}).fail(function(e,t,a){o.removeAttr("disabled"),o.html(n),hammock.helper.notify(hammock.error,"error")}),!1}),c("body").on("click",".hammock-ajax-toggle",function(e){var o=c(this),t=o.attr("data-id"),a=o.attr("data-nonce"),n=o.attr("data-action");c.post(window.ajaxurl,{module:t,_wpnonce:a,action:n}).done(function(e){!0===e.success?hammock.helper.notify(e.data,"success"):(o.is(":checked")?o.attr("checked",!1):o.attr("checked",!0),hammock.helper.notify(e.data,"warning"))}).fail(function(e,t,a){o.is(":checked")?o.attr("checked",!1):o.attr("checked",!0),hammock.helper.notify(hammock.error,"error")})}),c("body").on("click",".hammock-ajax-click",function(e){e.preventDefault();var o=c(this),t=o.attr("data-id"),a=o.attr("data-nonce"),e=o.attr("data-action"),n=o.text();o.attr("disabled","disabled"),o.html("<div uk-spinner></div>"),c.post(window.ajaxurl,{id:t,_wpnonce:a,action:e}).done(function(e){o.removeAttr("disabled"),o.html(n),!0===e.success?hammock.helper.notify(e.data,"success",function(){window.location.reload()}):hammock.helper.notify(e.data,"warning")}).fail(function(e,t,a){o.removeAttr("disabled"),o.html(n),hammock.helper.notify(hammock.error,"error")})}),c("body").on("click",".hammock-top-checkbox",function(e){c("input:checkbox").not(this).prop("checked",this.checked)}),c("body").on("click",".hammock-bottom-checkbox",function(e){c("input:checkbox").not(this).prop("checked",this.checked)}),c("body").on("change",".hammock-mode-select",function(e){var t=c(this),a=t.val(),t=t.attr("data-target");c(".hammock-"+t).hide(),c("."+t+"-"+a).show()}),c("body").on("click",".hammock-rule-update",function(e){e.preventDefault();var o=c(this),n=o.text(),t=o.parent(),a=t.attr("data-id"),e=t.attr("data-item"),t=t.find(".hammock-chosen-select").val();o.attr("disabled","disabled"),o.html("<div uk-spinner></div>"),c.post(window.ajaxurl,{id:a,item:e,selected:t,_wpnonce:hammock.ajax_nonce,action:"hammock_update_rule"}).done(function(e){o.removeAttr("disabled"),o.html(n),!0===e.success?hammock.helper.notify(e.data,"success"):hammock.helper.notify(e.data,"warning")}).fail(function(e,t,a){o.removeAttr("disabled"),o.html(n),hammock.helper.notify(hammock.error,"error")})})}),window.hammock=window.hammock||{},hammock.helper={notify:function(e,t,a){Swal.fire({type:t,title:e,confirmButtonText:hammock.common.buttons.ok}).then(function(e){e.value&&void 0!==a&&a()})},confirm:function(e,t,a){Swal.fire({type:t,title:e,showCancelButton:!0,confirmButtonText:hammock.common.buttons.ok,cancelButtonText:hammock.common.buttons.cancel}).then(function(e){e.value&&void 0!==a&&a()})},alert:function(e,t,a,o,n){void 0===n&&(n=!1),void 0===o&&(o="nfc-top-right"),window.createNotification({closeOnClick:!0,onclick:n,displayCloseButton:!0,positionClass:o,theme:a})({title:e,message:t})},loader:function(e,t){jQuery("<div class='"+e+"'><img src='"+hammock.assets.spinner+"' class='hammock-spinner-center'/></div>").css({position:"absolute",width:"100%",height:"100%",top:0,left:0,background:"#ecebea",textAlign:"center"}).appendTo(t.css("position","relative"))},bind_date_range:function(){var e,t;jQuery(".hammock-from-date").length&&(e=jQuery(".hammock-from-date").datepicker({dateFormat:"yy-mm-dd",minDate:"0",changeMonth:!0,changeYear:!0,numberOfMonths:1}),t=jQuery(".hammock-to-date").datepicker({dateFormat:"yy-mm-dd",changeMonth:!0,changeYear:!0,numberOfMonths:1}),e.on("change",function(){t.datepicker("option","minDate",hammock.helper.get_date(this))}),t.on("change",function(){e.datepicker("option","maxDate",hammock.helper.get_date(this))}))},get_date:function(e){var t;try{t=jQuery.datepicker.parseDate("yy-mm-dd",e.value)}catch(e){t=null}return t},select2:function(){jQuery(".hammock-select2").select2()}},jQuery(function(a){a("body").on("change",".hammock-membership-type",function(e){var t=a(this).val();a(".hammock-membership-date").hide(),a(".hammock-membership-recurring").hide(),"date-range"===t?a(".hammock-membership-date").show():"recurring"===t&&a(".hammock-membership-recurring").show()}),a("body").on("click",".hammock-trial_enabled",function(e){a(".hammock-membership-trial").hide(),this.checked&&a(".hammock-membership-trial").show()}),a("body").on("click",".hammock-limit_spaces",function(e){a(".hammock-membership-limited").hide(),this.checked&&a(".hammock-membership-limited").show()})});