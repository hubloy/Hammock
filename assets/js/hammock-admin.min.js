jQuery(function(m){m(document).on("click",".hubloy-membership-addon-toggle-setting",function(){var e=m(this),t=e.attr("data-id"),a=e.attr("data-name"),o=e.attr("data-nonce"),n=m("#addons-settings"),c=n.find(".hubloy-membership-canvas-content"),e=c.find(".addon-title"),i=c.find(".addon-content"),c=c.find(".addon_id");UIkit.offcanvas(n).isToggled()&&UIkit.offcanvas(n).close(),c.val(t),e.html(a),i.html('<span uk-spinner="ratio: 4.5"></span>'),UIkit.offcanvas(n).show(),m.post(window.ajaxurl,{id:t,_wpnonce:o,action:"hubloy-membership_addon_settings"}).done(function(e){e.success?i.html(e.data.view):i.html(e.data)}).fail(function(e,t,a){hubloy-membership.helper.notify(hubloy-membership.error,"error")})})}),jQuery(function(c){c(".hubloy-membership-date-filter").datepicker({dateFormat:"yy-mm-dd",maxDate:"0"}),hubloy-membership.helper.select2(),hubloy-membership.helper.bind_date_range(),c("body").on("submit","form.hubloy-membership-ajax-form",function(e){var a=c(this),o=a.find("button"),n=o.text();return o.attr("disabled","disabled"),o.html("<div uk-spinner></div>"),c.post(window.ajaxurl,a.serialize()).done(function(e){var t;o.removeAttr("disabled"),o.html(n),!0===e.success?(a.trigger("reset"),void 0!==e.data.message?(hubloy-membership.helper.notify(e.data.message,"success"),void 0!==e.data.modal&&(t=c(""+e.data.modal),UIkit.modal(t).hide()),void 0!==e.data.reload&&window.location.reload()):hubloy-membership.helper.notify(e.data,"success")):hubloy-membership.helper.notify(e.data,"warning")}).fail(function(e,t,a){o.removeAttr("disabled"),o.html(n),hubloy-membership.helper.notify(hubloy-membership.error,"error")}),!1}),c("body").on("click",".hubloy-membership-ajax-toggle",function(e){var o=c(this),t=o.attr("data-id"),a=o.attr("data-nonce"),n=o.attr("data-action");c.post(window.ajaxurl,{module:t,_wpnonce:a,action:n}).done(function(e){!0===e.success?hubloy-membership.helper.notify(e.data,"success"):(o.is(":checked")?o.attr("checked",!1):o.attr("checked",!0),hubloy-membership.helper.notify(e.data,"warning"))}).fail(function(e,t,a){o.is(":checked")?o.attr("checked",!1):o.attr("checked",!0),hubloy-membership.helper.notify(hubloy-membership.error,"error")})}),c("body").on("click",".hubloy-membership-ajax-click",function(e){e.preventDefault();var o=c(this),t=o.attr("data-id"),a=o.attr("data-nonce"),e=o.attr("data-action"),n=o.text();o.attr("disabled","disabled"),o.html("<div uk-spinner></div>"),c.post(window.ajaxurl,{id:t,_wpnonce:a,action:e}).done(function(e){o.removeAttr("disabled"),o.html(n),!0===e.success?hubloy-membership.helper.notify(e.data,"success",function(){window.location.reload()}):hubloy-membership.helper.notify(e.data,"warning")}).fail(function(e,t,a){o.removeAttr("disabled"),o.html(n),hubloy-membership.helper.notify(hubloy-membership.error,"error")})}),c("body").on("click",".hubloy-membership-top-checkbox",function(e){c("input:checkbox").not(this).prop("checked",this.checked)}),c("body").on("click",".hubloy-membership-bottom-checkbox",function(e){c("input:checkbox").not(this).prop("checked",this.checked)}),c("body").on("change",".hubloy-membership-mode-select",function(e){var t=c(this),a=t.val(),t=t.attr("data-target");c(".hubloy-membership-"+t).hide(),c("."+t+"-"+a).show()}),c("body").on("click",".hubloy-membership-rule-update",function(e){e.preventDefault();var o=c(this),n=o.text(),t=o.parent(),a=t.attr("data-id"),e=t.attr("data-item"),t=t.find(".hubloy-membership-chosen-select").val();o.attr("disabled","disabled"),o.html("<div uk-spinner></div>"),c.post(window.ajaxurl,{id:a,item:e,selected:t,_wpnonce:hubloy-membership.ajax_nonce,action:"hubloy-membership_update_rule"}).done(function(e){o.removeAttr("disabled"),o.html(n),!0===e.success?hubloy-membership.helper.notify(e.data,"success"):hubloy-membership.helper.notify(e.data,"warning")}).fail(function(e,t,a){o.removeAttr("disabled"),o.html(n),hubloy-membership.helper.notify(hubloy-membership.error,"error")})})}),window.hubloy-membership=window.hubloy-membership||{},hubloy-membership.helper={notify:function(e,t,a){Swal.fire({type:t,title:e,confirmButtonText:hubloy-membership.common.buttons.ok}).then(function(e){e.value&&void 0!==a&&a()})},confirm:function(e,t,a){Swal.fire({type:t,title:e,showCancelButton:!0,confirmButtonText:hubloy-membership.common.buttons.ok,cancelButtonText:hubloy-membership.common.buttons.cancel}).then(function(e){e.value&&void 0!==a&&a()})},alert:function(e,t,a,o,n){void 0===n&&(n=!1),void 0===o&&(o="nfc-top-right"),window.createNotification({closeOnClick:!0,onclick:n,displayCloseButton:!0,positionClass:o,theme:a})({title:e,message:t})},loader:function(e,t){jQuery("<div class='"+e+"'><img src='"+hubloy-membership.assets.spinner+"' class='hubloy-membership-spinner-center'/></div>").css({position:"absolute",width:"100%",height:"100%",top:0,left:0,background:"#ecebea",textAlign:"center"}).appendTo(t.css("position","relative"))},bind_date_range:function(){var e,t;jQuery(".hubloy-membership-from-date").length&&(e=jQuery(".hubloy-membership-from-date").datepicker({dateFormat:"yy-mm-dd",minDate:"0",changeMonth:!0,changeYear:!0,numberOfMonths:1}),t=jQuery(".hubloy-membership-to-date").datepicker({dateFormat:"yy-mm-dd",changeMonth:!0,changeYear:!0,numberOfMonths:1}),e.on("change",function(){t.datepicker("option","minDate",hubloy-membership.helper.get_date(this))}),t.on("change",function(){e.datepicker("option","maxDate",hubloy-membership.helper.get_date(this))}))},get_date:function(e){var t;try{t=jQuery.datepicker.parseDate("yy-mm-dd",e.value)}catch(e){t=null}return t},select2:function(){jQuery(".hubloy-membership-select2").select2();var e=jQuery(".hubloy-membership-select2-ajax");e.length&&(e=e.attr("data-url"),jQuery(".hubloy-membership-select2-ajax").select2({ajax:{url:e,dataType:"json",processResults:function(e){return{results:e.data}}}}))}},jQuery(function(a){a("body").on("change",".hubloy-membership-membership-type",function(e){var t=a(this).val();a(".hubloy-membership-membership-date").hide(),a(".hubloy-membership-membership-recurring").hide(),"date-range"===t?a(".hubloy-membership-membership-date").show():"recurring"===t&&a(".hubloy-membership-membership-recurring").show()}),a("body").on("click",".hubloy-membership-trial_enabled",function(e){a(".hubloy-membership-membership-trial").hide(),this.checked&&a(".hubloy-membership-membership-trial").show()}),a("body").on("click",".hubloy-membership-limit_spaces",function(e){a(".hubloy-membership-membership-limited").hide(),this.checked&&a(".hubloy-membership-membership-limited").show()})});