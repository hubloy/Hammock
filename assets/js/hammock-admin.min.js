/*! Hammock  - v1.0.0
 * https://www.hammock-membership.com
 * Copyright (c) 2021; * Licensed GPLv2+ */

window.hammock=window.hammock||{},hammock.helper={notify:function(t,e,o){Swal.fire({type:e,title:t,confirmButtonText:hammock.common.buttons.ok}).then(function(t){t.value&&void 0!==o&&o()})},confirm:function(t,e,o){Swal.fire({type:e,title:t,showCancelButton:!0,confirmButtonText:hammock.common.buttons.ok,cancelButtonText:hammock.common.buttons.cancel}).then(function(t){t.value&&void 0!==o&&o()})},alert:function(t,e,o,a,n){void 0===n&&(n=!1),void 0===a&&(a="nfc-top-right"),window.createNotification({closeOnClick:!0,onclick:n,displayCloseButton:!0,positionClass:a,theme:o})({title:t,message:e})},loader:function(t,e){jQuery("<div class='"+t+"'><img src='"+hammock.assets.spinner+"' class='hammock-spinner-center'/></div>").css({position:"absolute",width:"100%",height:"100%",top:0,left:0,background:"#ecebea",textAlign:"center"}).appendTo(e.css("position","relative"))},bind_date_range:function(){if(jQuery(".hammock-from-date").length){var t=jQuery(".hammock-from-date").datepicker({dateFormat:"yy-mm-dd",minDate:"0",changeMonth:!0,changeYear:!0,numberOfMonths:1}),e=jQuery(".hammock-to-date").datepicker({dateFormat:"yy-mm-dd",changeMonth:!0,changeYear:!0,numberOfMonths:1});t.on("change",function(){e.datepicker("option","minDate",hammock.helper.get_date(this))}),e.on("change",function(){t.datepicker("option","maxDate",hammock.helper.get_date(this))})}},get_date:function(t){var e;try{e=jQuery.datepicker.parseDate("yy-mm-dd",t.value)}catch(t){e=null}return e}},jQuery(function(t){t(".hammock-date-filter").datepicker({dateFormat:"yy-mm-dd",maxDate:"0"}),t(".hammock-chosen-select").chosen({no_results_text:hammock.no_results,width:"95%"}),hammock.helper.bind_date_range(),t("body").on("submit","form.hammock-ajax-form",function(e){var o=t(this),a=o.find("button"),n=a.text();return a.attr("disabled","disabled"),a.html("<div uk-spinner></div>"),t.post(window.ajaxurl,o.serialize()).done(function(e){if(a.removeAttr("disabled"),a.html(n),!0===e.success)if(o.trigger("reset"),void 0!==e.data.message){if(hammock.helper.notify(e.data.message,"success"),void 0!==e.data.modal){var c=t(""+e.data.modal);UIkit.modal(c).hide()}void 0!==e.data.reload&&window.location.reload()}else hammock.helper.notify(e.data,"success");else hammock.helper.notify(e.data,"warning")}).fail(function(t,e,o){a.removeAttr("disabled"),a.html(n),hammock.helper.notify(hammock.error,"error")}),!1}),t("body").on("click",".hammock-ajax-toggle",function(e){var o=t(this),a=o.attr("data-id"),n=o.attr("data-nonce"),c=o.attr("data-action");t.post(window.ajaxurl,{module:a,_wpnonce:n,action:c}).done(function(t){!0===t.success?hammock.helper.notify(t.data,"success"):(o.is(":checked")?o.attr("checked",!1):o.attr("checked",!0),hammock.helper.notify(t.data,"warning"))}).fail(function(t,e,a){o.is(":checked")?o.attr("checked",!1):o.attr("checked",!0),hammock.helper.notify(hammock.error,"error")})}),t("body").on("click",".hammock-ajax-click",function(e){e.preventDefault();var o=t(this),a=o.attr("data-id"),n=o.attr("data-nonce"),c=o.attr("data-action"),i=o.text();o.attr("disabled","disabled"),o.html("<div uk-spinner></div>"),t.post(window.ajaxurl,{id:a,_wpnonce:n,action:c}).done(function(t){o.removeAttr("disabled"),o.html(i),!0===t.success?hammock.helper.notify(t.data,"success",function(){window.location.reload()}):hammock.helper.notify(t.data,"warning")}).fail(function(t,e,a){o.removeAttr("disabled"),o.html(i),hammock.helper.notify(hammock.error,"error")})}),t("body").on("click",".hammock-top-checkbox",function(e){t("input:checkbox").not(this).prop("checked",this.checked)}),t("body").on("click",".hammock-bottom-checkbox",function(e){t("input:checkbox").not(this).prop("checked",this.checked)}),t("body").on("change",".hammock-mode-select",function(e){var o=t(this),a=o.val(),n=o.attr("data-target");t(".hammock-"+n).hide(),t("."+n+"-"+a).show()})}),jQuery(function(t){t("body").on("change",".hammock-membership-type",function(e){var o=t(this).val();t(".hammock-membership-date").hide(),t(".hammock-membership-recurring").hide(),"date-range"===o?t(".hammock-membership-date").show():"recurring"===o&&t(".hammock-membership-recurring").show()}),t("body").on("click",".hammock-trial_enabled",function(e){t(".hammock-membership-trial").hide(),this.checked&&t(".hammock-membership-trial").show()}),t("body").on("click",".hammock-limit_spaces",function(e){t(".hammock-membership-limited").hide(),this.checked&&t(".hammock-membership-limited").show()})}),jQuery(function(t){t(document).on("click",".hammock-addon-toggle-setting",function(){var e=t(this),o=e.attr("data-id"),a=e.attr("data-name"),n=e.attr("data-nonce"),c=t("#addons-settings"),i=c.find(".hammock-canvas-content"),m=i.find(".addon-title"),r=i.find(".addon-content"),d=i.find(".addon_id");UIkit.offcanvas(c).isToggled()&&UIkit.offcanvas(c).close(),d.val(o),m.html(a),r.html('<span uk-spinner="ratio: 4.5"></span>'),UIkit.offcanvas(c).show(),t.post(window.ajaxurl,{id:o,_wpnonce:n,action:"hammock_addon_settings"}).done(function(t){t.success?r.html(t.data.view):r.html(t.data)}).fail(function(t,e,o){hammock.helper.notify(hammock.error,"error")})})});