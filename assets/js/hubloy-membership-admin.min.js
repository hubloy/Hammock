jQuery(function(h){h(document).on("click",".hubloy_membership-addon-toggle-setting",function(){var e=h(this),t=e.attr("data-id"),i=e.attr("data-name"),o=e.attr("data-nonce"),r=h("#addons-settings"),n=r.find(".hubloy_membership-canvas-content"),e=n.find(".addon-title"),a=n.find(".addon-content"),n=n.find(".addon_id");UIkit.offcanvas(r).isToggled()&&UIkit.offcanvas(r).close(),n.val(t),e.html(i),a.html('<span uk-spinner="ratio: 4.5"></span>'),UIkit.offcanvas(r).show(),h.post(window.ajaxurl,{id:t,_wpnonce:o,action:"hubloy_membership_addon_settings"}).done(function(e){e.success?a.html(e.data.view):a.html(e.data)}).fail(function(e,t,i){hubloy_membership.helper.notify(hubloy_membership.error,"error")})})}),jQuery(function(n){n(".hubloy_membership-date-filter").datepicker({dateFormat:"yy-mm-dd",maxDate:"0"}),hubloy_membership.helper.select2(),hubloy_membership.helper.bind_date_range(),n("body").on("submit","form.hubloy_membership-ajax-form",function(e){var i=n(this),o=i.find("button"),r=o.text();return o.attr("disabled","disabled"),o.html("<div uk-spinner></div>"),n.post(window.ajaxurl,i.serialize()).done(function(e){var t;o.removeAttr("disabled"),o.html(r),!0===e.success?(i.trigger("reset"),void 0!==e.data.message?(hubloy_membership.helper.notify(e.data.message,"success"),void 0!==e.data.modal&&(t=n(""+e.data.modal),UIkit.modal(t).hide()),void 0!==e.data.reload&&window.location.reload()):hubloy_membership.helper.notify(e.data,"success")):hubloy_membership.helper.notify(e.data,"warning")}).fail(function(e,t,i){o.removeAttr("disabled"),o.html(r),hubloy_membership.helper.notify(hubloy_membership.error,"error")}),!1}),n("body").on("click",".hubloy_membership-ajax-toggle",function(e){var o=n(this),t=o.attr("data-id"),i=o.attr("data-nonce"),r=o.attr("data-action");n.post(window.ajaxurl,{module:t,_wpnonce:i,action:r}).done(function(e){!0===e.success?hubloy_membership.helper.notify(e.data,"success"):(o.is(":checked")?o.attr("checked",!1):o.attr("checked",!0),hubloy_membership.helper.notify(e.data,"warning"))}).fail(function(e,t,i){o.is(":checked")?o.attr("checked",!1):o.attr("checked",!0),hubloy_membership.helper.notify(hubloy_membership.error,"error")})}),n("body").on("click",".hubloy_membership-ajax-click",function(e){e.preventDefault();var o=n(this),t=o.attr("data-id"),i=o.attr("data-nonce"),e=o.attr("data-action"),r=o.text();o.attr("disabled","disabled"),o.html("<div uk-spinner></div>"),n.post(window.ajaxurl,{id:t,_wpnonce:i,action:e}).done(function(e){o.removeAttr("disabled"),o.html(r),!0===e.success?hubloy_membership.helper.notify(e.data,"success",function(){window.location.reload()}):hubloy_membership.helper.notify(e.data,"warning")}).fail(function(e,t,i){o.removeAttr("disabled"),o.html(r),hubloy_membership.helper.notify(hubloy_membership.error,"error")})}),n("body").on("click",".hubloy_membership-top-checkbox",function(e){n("input:checkbox").not(this).prop("checked",this.checked)}),n("body").on("click",".hubloy_membership-bottom-checkbox",function(e){n("input:checkbox").not(this).prop("checked",this.checked)}),n("body").on("change",".hubloy_membership-mode-select",function(e){var t=n(this),i=t.val(),t=t.attr("data-target");n(".hubloy_membership-"+t).hide(),n("."+t+"-"+i).show()}),n("body").on("click",".hubloy_membership-rule-update",function(e){e.preventDefault();var o=n(this),r=o.text(),t=o.parent(),i=t.attr("data-id"),e=t.attr("data-item"),t=t.find(".hubloy_membership-chosen-select").val();o.attr("disabled","disabled"),o.html("<div uk-spinner></div>"),n.post(window.ajaxurl,{id:i,item:e,selected:t,_wpnonce:hubloy_membership.ajax_nonce,action:"hubloy_membership_update_rule"}).done(function(e){o.removeAttr("disabled"),o.html(r),!0===e.success?hubloy_membership.helper.notify(e.data,"success"):hubloy_membership.helper.notify(e.data,"warning")}).fail(function(e,t,i){o.removeAttr("disabled"),o.html(r),hubloy_membership.helper.notify(hubloy_membership.error,"error")})})}),window.hubloy_membership=window.hubloy_membership||{},hubloy_membership.helper={notify:function(e,t,i){Swal.fire({type:t,title:e,confirmButtonText:hubloy_membership.common.buttons.ok}).then(function(e){e.value&&void 0!==i&&i()})},confirm:function(e,t,i){Swal.fire({type:t,title:e,showCancelButton:!0,confirmButtonText:hubloy_membership.common.buttons.ok,cancelButtonText:hubloy_membership.common.buttons.cancel}).then(function(e){e.value&&void 0!==i&&i()})},alert:function(e,t,i,o,r){void 0===r&&(r=!1),void 0===o&&(o="nfc-top-right"),window.createNotification({closeOnClick:!0,onclick:r,displayCloseButton:!0,positionClass:o,theme:i})({title:e,message:t})},loader:function(e,t){jQuery("<div class='"+e+"'><img src='"+hubloy_membership.assets.spinner+"' class='hubloy_membership-spinner-center'/></div>").css({position:"absolute",width:"100%",height:"100%",top:0,left:0,background:"#ecebea",textAlign:"center"}).appendTo(t.css("position","relative"))},bind_date_range:function(){var e,t;jQuery(".hubloy_membership-from-date").length&&(e=jQuery(".hubloy_membership-from-date").datepicker({dateFormat:"yy-mm-dd",minDate:"0",changeMonth:!0,changeYear:!0,numberOfMonths:1}),t=jQuery(".hubloy_membership-to-date").datepicker({dateFormat:"yy-mm-dd",changeMonth:!0,changeYear:!0,numberOfMonths:1}),e.on("change",function(){t.datepicker("option","minDate",hubloy_membership.helper.get_date(this))}),t.on("change",function(){e.datepicker("option","maxDate",hubloy_membership.helper.get_date(this))}))},get_date:function(e){var t;try{t=jQuery.datepicker.parseDate("yy-mm-dd",e.value)}catch(e){t=null}return t},select2:function(){jQuery(".hubloy_membership-select2").select2();var e=jQuery(".hubloy_membership-select2-ajax");e.length&&(e=e.attr("data-url"),jQuery(".hubloy_membership-select2-ajax").select2({ajax:{url:e,dataType:"json",processResults:function(e){return{results:e.data}}}}))}},jQuery(function(i){i("body").on("change",".hubloy_membership-membership-type",function(e){var t=i(this).val();i(".hubloy_membership-membership-date").hide(),i(".hubloy_membership-membership-recurring").hide(),"date-range"===t?i(".hubloy_membership-membership-date").show():"recurring"===t&&i(".hubloy_membership-membership-recurring").show()}),i("body").on("click",".hubloy_membership-trial_enabled",function(e){i(".hubloy_membership-membership-trial").hide(),this.checked&&i(".hubloy_membership-membership-trial").show()}),i("body").on("click",".hubloy_membership-limit_spaces",function(e){i(".hubloy_membership-membership-limited").hide(),this.checked&&i(".hubloy_membership-membership-limited").show()})});